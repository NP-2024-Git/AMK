<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø§Ø²ÛŒ Ù…ÛŒÙ†â€ŒØ§Ø³Ø±ÙˆÙ¾</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            background-color: #92b6da;
            margin: 0;
        }
        #grid {
            display: grid;
            grid-template-columns: repeat(10, 40px);
            grid-template-rows: repeat(10, 40px);
            gap: 5px;
        }
        .cell {
            width: 40px;
            height: 40px;
            border: 2px solid #da735a;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #ffffff;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
            font-size: 20px;
            font-weight: bold;
        }
        .cell:hover {
            background-color: #e9ecef;
            transform: scale(1.05);
        }
        .revealed {
            background-color: #d1ecf1;
            border: 2px solid #5bc0de;
        }
        .mine {
            color: #dc3545;
            font-size: 24px;
        }
        .flag {
            color: #ffc107;
            font-size: 24px;
        }
        #difficulty {
            margin-bottom: 20px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <select id="difficulty">
        <option value="easy">Ø¢Ø³Ø§Ù†</option>
        <option value="medium">Ù…ØªÙˆØ³Ø·</option>
        <option value="hard">Ø³Ø®Øª</option>
    </select>
    <button onclick="startGame()">Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</button>
    <div id="grid"></div>
    <script>
        const gridElement = document.getElementById('grid');
        const difficultySelect = document.getElementById('difficulty');
        let gridSize;
        let mineCount;
        let grid = [];

        function startGame() {
            const difficulty = difficultySelect.value;
            if (difficulty === 'easy') {
                gridSize = 8;
                mineCount = 10;
            } else if (difficulty === 'medium') {
                gridSize = 10;
                mineCount = 20;
            } else {
                gridSize = 12;
                mineCount = 30;
            }
            createGrid();
        }

        function createGrid() {
            grid = Array.from({ length: gridSize }, () => Array(gridSize).fill(0));
            placeMines();
            calculateAdjacentMines();
            renderGrid();
        }

        function placeMines() {
            let minesPlaced = 0;
            while (minesPlaced < mineCount) {
                const x = Math.floor(Math.random() * gridSize);
                const y = Math.floor(Math.random() * gridSize);
                if (grid[x][y] !== 'ðŸ’£') {
                    grid[x][y] = 'ðŸ’£';
                    minesPlaced++;
                }
            }
        }

        function calculateAdjacentMines() {
            for (let x = 0; x < gridSize; x++) {
                for (let y = 0; y < gridSize; y++) {
                    if (grid[x][y] === 'ðŸ’£') {
                        for (let i = -1; i <= 1; i++) {
                            for (let j = -1; j <= 1; j++) {
                                const newX = x + i;
                                const newY = y + j;
                                if (newX >= 0 && newX < gridSize && newY >= 0 && newY < gridSize && grid[newX][newY] !== 'ðŸ’£') {
                                    grid[newX][newY]++;
                                }
                            }
                        }
                    }
                }
            }
        }

        function renderGrid() {
            gridElement.innerHTML = '';
            for (let x = 0; x < gridSize; x++) {
                for (let y = 0; y < gridSize; y++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.dataset.x = x;
                    cell.dataset.y = y;
                    cell.onclick = () => revealCell(x, y);
                    cell.oncontextmenu = (e) => {
                        e.preventDefault();
                        toggleFlag(x, y);
                    };
                    gridElement.appendChild(cell);
                }
            }
        }

        function revealCell(x, y) {
            const cell = gridElement.children[x * gridSize + y];
            if (grid[x][y] === 'ðŸ’£') {
                cell.classList.add('revealed');
                cell.innerHTML = '<span class="mine">ðŸ’£</span>';
                alert('Ø¨Ø§Ø²ÛŒ ØªÙ…Ø§Ù… Ø´Ø¯! Ø´Ù…Ø§ Ø¨Ù…Ø¨ Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯ÛŒØ¯.');
                revealAllMines(); 
            } else {
                cell.classList.add('revealed');
                cell.innerText = grid[x][y] > 0 ? grid[x][y] : '';
            }
        }

        function revealAllMines() {
            for (let x = 0; x < gridSize; x++) {
                for (let y = 0; y < gridSize; y++) {
                    if (grid[x][y] === 'ðŸ’£') {
                        const cell = gridElement.children[x * gridSize + y];
                        cell.classList.add('revealed');
                        cell.innerHTML = '<span class="mine">ðŸ’£</span>';
                    } else if (grid[x][y] > 0) {
                        const cell = gridElement.children[x * gridSize + y];
                        cell.classList.add('revealed');
                        cell.innerText = grid[x][y];
                    }
                }
            }
        }

        function toggleFlag(x, y) {
            const cell = gridElement.children[x * gridSize + y];
            if (cell.innerText === 'ðŸš©') {
                cell.innerText = '';
                cell.classList.remove('flag');
            } else {
                cell.innerText = 'ðŸš©';
                cell.classList.add('flag');
            }
        }
    </script>
</body>
</html>